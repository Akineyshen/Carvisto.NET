@model Carvisto.Models.HomeViewModel
@{
    ViewData["Title"] = "Home Page";
}
<div class="hero-container">
    <img src="images/background.jpg" alt="Carvisto" class="hero-image">
    <div class="overlay">
        <h1 class="headline">Cheap for passengers – profitable for drivers</h1>
        <div class="search-panel">
                <form asp-action="Search" method="get" class="search-fields">
                    <div class="search-field">
                        <input type="text" id="startLocation" name="StartLocation" placeholder="City Departure"/>
                    </div>
                    <button type="button" class="swap-btn" aria-label="Swap locations">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16">
                            <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41m-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9"/>
                            <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5 5 0 0 0 8 3M3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9z"/>
                        </svg>
                    </button>
                    <div class="search-field">
                        <input type="text" id="EndLocation" name="EndLocation" placeholder="City Arrival"/>
                    </div>
                    <div class="search-field">
                        <div class="search-field custom-date">
                            <input type="date" name="DepartureDate"/>
                        </div>
                    </div>
                    <button type="submit" class="search-btn">Найти</button>
                </form>
        </div>
        <div class="create-trip-container">
            <a class="create-trip-btn2" href="/Trips/Create">
                <span class="plus">+</span>
                Create Trip
            </a>
        </div>
    </div>
</div>

<div class="trips-section">
    <h2 class="services-title">Recently added trips</h2>
    <div class="trip-grid">
        @foreach (var trip in Model.RecentTrips) {
            <div class="trip-card">
                <div class="trip-card-header">
                    <div class="trip-route">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-geo-alt-fill" viewBox="0 0 16 16">
                            <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6"/>
                        </svg>
                        @trip.StartLocation ➞ @trip.EndLocation
                    </div>
                </div>
                <div class="trip-details">
                    <div class="trip-info-item">
                        <svg class="trip-info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                        @trip.DepartureDateTime.ToString("MMM dd HH:mm")
                    </div>
                    <div class="trip-info-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="trip-info-icon" viewBox="0 0 16 16" >
                            <path d="M2.52 3.515A2.5 2.5 0 0 1 4.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679q.05.242.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5 0 0 1 .049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.8.8 0 0 0 .381-.404l.792-1.848ZM3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2m10 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6 8a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2zM2.906 5.189a.51.51 0 0 0 .497.731c.91-.073 3.35-.17 4.597-.17s3.688.097 4.597.17a.51.51 0 0 0 .497-.731l-.956-1.913A.5.5 0 0 0 11.691 3H4.309a.5.5 0 0 0-.447.276L2.906 5.19Z"/>
                        </svg>
                        @trip.VehicleBrand
                    </div>
                </div>
                <div class="trip-price">
                    <div>
                        <div class="price-amount">@trip.Price PLN</div>
                        <div class="price-per-seat">per seat</div>
                    </div>
                    <button class="view-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
                            <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"/>
                            <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"/>
                        </svg>
                        <span>View</span>
                    </button>
                </div>
            </div>
        }
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const swapBtn = document.querySelector('.swap-btn');

        swapBtn.addEventListener('click', function() {
            const startLocation = document.querySelector('input[name="StartLocation"]');
            const endLocation = document.querySelector('input[name="EndLocation"]');

            // Проверка на существование элементов
            if (!startLocation || !endLocation) {
                console.error('Не найдены поля ввода');
                return;
            }

            // Меняем значения местами
            const temp = startLocation.value;
            startLocation.value = endLocation.value;
            endLocation.value = temp;

            // Добавим анимацию для визуального подтверждения
            this.style.transform = 'rotate(180deg)';
            setTimeout(() => {
                this.style.transform = 'rotate(0)';
            }, 300);
        });
    });
</script>